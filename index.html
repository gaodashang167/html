<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®æ—¶æ–°é—»èšåˆå¹³å°</title>
    <style>
        /* åŸºç¡€æ ·å¼ä¿æŒä¸å˜ï¼Œæ–°å¢ä»¥ä¸‹æ ·å¼ */
        .refresh-indicator {
            position: fixed;
            top: 10px;
            right: 20px;
            background: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            font-size: 0.9rem;
            color: #666;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .loading-dots::after {
            content: '';
            animation: dots 1.4s infinite;
        }

        @keyframes dots {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }

        .news-card[data-new]::before {
            content: "æ–°";
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4757;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            z-index: 1;
        }
    </style>
</head>
<body>
    <div class="news-container">
        <div class="refresh-indicator">
            <span>æœ€åæ›´æ–°: <span id="lastUpdateTime">åˆšåˆš</span></span>
            <span class="loading-dots"></span>
        </div>
        
        <!-- æ–°é—»å†…å®¹ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
    </div>

    <script>
        // æ¨¡æ‹Ÿå®æ—¶æ–°é—»æ•°æ®æ± 
        const newsPool = {
            zhihu: [
                {
                    id: 1,
                    title: "å¦‚ä½•è¯„ä»·ä»»å¤©å ‚æ–°æ¸¸æˆæœº Switch2 ä¸ç¬¬ä¸€ä»£ç›¸æ¯”çš„äº®ç‚¹ï¼Ÿ",
                    hot: 185000,
                    likes: 670000,
                    timestamp: Date.now()
                },
                // æ›´å¤šåˆå§‹æ•°æ®...
            ],
            weibo: [
                {
                    id: 1,
                    title: "è”åˆå›½ç‚¹èµä¸­å›½æ–°èƒ½æºå‘å±•",
                    reads: 1296000,
                    comments: 21000,
                    timestamp: Date.now()
                },
                // æ›´å¤šåˆå§‹æ•°æ®...
            ],
            // å…¶ä»–å¹³å°æ•°æ®...
        };

        // æ–°é—»ç”Ÿæˆå™¨
        class NewsGenerator {
            constructor() {
                this.lastUpdate = Date.now();
                this.interval = 30000; // 30ç§’æ›´æ–°ä¸€æ¬¡
            }

            // åˆå§‹åŒ–æ–°é—»å®¹å™¨
            initContainer() {
                const container = document.querySelector('.news-container');
                container.innerHTML = `
                    <nav class="news-nav">
                        <div class="news-tab active">çƒ­é—¨</div>
                        <div class="news-tab">æœ€æ–°</div>
                        <div class="news-tab">å…³æ³¨</div>
                    </nav>
                    <div id="newsContent"></div>
                `;
            }

            // æ¸²æŸ“æ–°é—»å¡ç‰‡
            renderNews() {
                const content = document.getElementById('newsContent');
                content.innerHTML = '';
                
                Object.entries(newsPool).forEach(([platform, items]) => {
                    const card = document.createElement('div');
                    card.className = 'news-card';
                    card.innerHTML = `
                        <div class="platform-header">
                            <span class="platform-name">${this.getPlatformName(platform)}</span>
                            <span class="update-time">${this.formatTime(items[0].timestamp)}</span>
                        </div>
                        ${items.map(item => `
                            <div class="news-item" data-id="${item.id}">
                                <h3 class="news-title">${item.title}</h3>
                                <div class="news-meta">
                                    ${item.hot ? `<span class="hot-tag">çƒ­</span>` : ''}
                                    <span class="interaction">
                                        ${this.getInteractionData(platform, item)}
                                    </span>
                                </div>
                            </div>
                        `).join('')}
                    `;
                    content.appendChild(card);
                });
            }

            // è·å–å¹³å°æ˜¾ç¤ºåç§°
            getPlatformName(platform) {
                const names = {
                    zhihu: 'çŸ¥ä¹',
                    weibo: 'å¾®åš',
                    douyin: 'æŠ–éŸ³',
                    kuan: 'é…·å®‰'
                };
                return names[platform] || platform;
            }

            // æ ¼å¼åŒ–æ—¶é—´
            formatTime(timestamp) {
                const diff = Date.now() - timestamp;
                const minutes = Math.floor(diff / 60000);
                return minutes < 1 ? 'åˆšåˆš' : `${minutes}åˆ†é’Ÿå‰`;
            }

            // è·å–äº’åŠ¨æ•°æ®
            getInteractionData(platform, item) {
                const dataMap = {
                    zhihu: `è®¨è®º ${this.formatNumber(item.hot)} Â· ç‚¹èµ ${this.formatNumber(item.likes)}`,
                    weibo: `é˜…è¯» ${this.formatNumber(item.reads)} Â· è®¨è®º ${this.formatNumber(item.comments)}`,
                    douyin: `æ’­æ”¾ ${this.formatNumber(item.views)} Â· è¯„è®º ${this.formatNumber(item.comments)}`
                };
                return dataMap[platform] || '';
            }

            // æ•°å­—æ ¼å¼åŒ–
            formatNumber(num) {
                return num >= 10000 ? `${(num/10000).toFixed(1)}ä¸‡` : num;
            }

            // ç”Ÿæˆæ–°æ–°é—»
            generateNewItem(platform) {
                return {
                    id: Date.now(),
                    title: this.generateTitle(platform),
                    ...this.generateInteractionData(platform),
                    timestamp: Date.now()
                };
            }

            // æ¨¡æ‹Ÿæ ‡é¢˜ç”Ÿæˆ
            generateTitle(platform) {
                const keywords = {
                    zhihu: ['å¦‚ä½•è¯„ä»·', 'æ€æ ·çœ‹å¾…', 'ä¸ºä»€ä¹ˆè¯´'],
                    weibo: ['æœ€æ–°è¿›å±•', 'çªå‘æ–°é—»', 'çƒ­ç‚¹è¿½è¸ª'],
                    douyin: ['çƒ­é—¨è§†é¢‘', 'æœ€æ–°æŒ‘æˆ˜', 'çˆ†æ¬¾å†…å®¹']
                };
                const suffix = {
                    zhihu: ['?', 'ï¼Ÿ', 'æœ‰å“ªäº›å½±å“?'],
                    weibo: ['', '!', 'å¼•å‘å…³æ³¨'],
                    douyin: ['', 'ğŸ”¥', 'ğŸ’¥']
                };
                return `${keywords[platform][Math.floor(Math.random()*keywords[platform].length)]} ${this.randomTopic()}${suffix[platform][Math.floor(Math.random()*suffix[platform].length)]}`;
            }

            randomTopic() {
                const topics = ['æ–°èƒ½æºæ±½è½¦', 'äººå·¥æ™ºèƒ½', 'å›½é™…å±€åŠ¿', 'ç§‘æŠ€åˆ›æ–°', 'æ•°å­—ç»æµ'];
                return topics[Math.floor(Math.random()*topics.length)];
            }

            // å¯åŠ¨æ›´æ–°å¾ªç¯
            startUpdate() {
                setInterval(() => {
                    this.updateNews();
                    this.lastUpdate = Date.now();
                    document.getElementById('lastUpdateTime').textContent = 'åˆšåˆš';
                }, this.interval);
                
                // é¦–æ¬¡åŠ è½½
                this.updateNews();
            }

            // æ‰§è¡Œæ–°é—»æ›´æ–°
            updateNews() {
                Object.keys(newsPool).forEach(platform => {
                    // ç§»é™¤æ—§æ–°é—»
                    if(newsPool[platform].length > 5) newsPool[platform].shift();
                    
                    // æ·»åŠ æ–°æ–°é—»
                    newsPool[platform].push(this.generateNewItem(platform));
                    
                    // æ›´æ–°äº’åŠ¨æ•°æ®
                    newsPool[platform].forEach(item => {
                        item.hot && (item.hot += Math.floor(Math.random()*1000));
                        item.likes && (item.likes += Math.floor(Math.random()*500));
                        item.reads && (item.reads += Math.floor(Math.random()*5000));
                    });
                });
                
                this.renderNews();
            }
        }

        // åˆå§‹åŒ–è¿è¡Œ
        const newsGen = new NewsGenerator();
        newsGen.initContainer();
        newsGen.startUpdate();

        // æ·»åŠ ç‚¹å‡»åˆ·æ–°åŠŸèƒ½
        document.querySelector('.refresh-indicator').addEventListener('click', () => {
            newsGen.updateNews();
        });
    </script>
</body>
</html>
