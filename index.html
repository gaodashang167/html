<!-- 在原有世界时间组件后添加 -->
<section class="news-section" id="news">
    <div class="news-container">
        <h2 class="section-title">全球实时要闻</h2>
        <div class="news-grid" id="newsGrid">
            <div class="loading-spinner"></div>
        </div>
    </div>
</section>

<style>
    /* 新增新闻模块样式 */
    .news-section {
        padding: 8rem 5%;
        background: linear-gradient(45deg, 
            rgba(10, 25, 47, 0.97), 
            rgba(16, 36, 70, 0.95));
        min-height: 100vh;
        position: relative;
        overflow: hidden;
    }

    .section-title {
        font-size: 2.5rem;
        background: linear-gradient(45deg, var(--primary), var(--secondary));
        -webkit-background-clip: text;
        color: transparent;
        margin-bottom: 3rem;
        text-align: center;
        position: relative;
        z-index: 2;
    }

    .news-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 2rem;
        max-width: 1200px;
        margin: 0 auto;
        position: relative;
        z-index: 2;
    }

    .news-card {
        background: rgba(17, 34, 64, 0.6);
        border-radius: 1rem;
        padding: 1.5rem;
        backdrop-filter: blur(12px);
        border: 1px solid var(--primary);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        position: relative;
        overflow: hidden;
        box-shadow: 0 8px 32px rgba(16, 24, 39, 0.2);
    }

    .news-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 48px rgba(100, 255, 218, 0.15);
    }

    .news-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid rgba(100, 255, 218, 0.2);
    }

    .news-source {
        color: var(--primary);
        font-weight: 600;
        font-size: 0.95rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .hot-tag {
        background: linear-gradient(45deg, #ff6b6b, #ff3838);
        color: white;
        padding: 0.25rem 1rem;
        border-radius: 1rem;
        font-size: 0.8rem;
        font-weight: 500;
        text-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }

    .news-title {
        font-size: 1.1rem;
        line-height: 1.6;
        margin-bottom: 1.5rem;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .news-stats {
        display: flex;
        gap: 1.5rem;
        color: var(--light);
        opacity: 0.8;
        font-size: 0.9rem;
    }

    .news-stats span {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .loading-spinner {
        width: 50px;
        height: 50px;
        border: 3px solid var(--primary);
        border-radius: 50%;
        border-top-color: transparent;
        animation: spin 1s linear infinite;
        margin: 2rem auto;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    /* 数据流动特效 */
    .news-card::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
            45deg,
            transparent 25%,
            rgba(100, 255, 218, 0.1) 50%,
            transparent 75%
        );
        animation: dataFlow 8s infinite linear;
    }

    @keyframes dataFlow {
        100% { transform: translate(50%, 50%) rotate(360deg); }
    }
</style>

<script>
    // 获取Reddit新闻（增强版）
    async function fetchEnhancedNews() {
        try {
            const subreddits = ['worldnews', 'news', 'technology'];
            const responses = await Promise.all(
                subreddits.map(sub => 
                    fetch(`https://www.reddit.com/r/${sub}/top.json?limit=5`)
                        .then(res => res.json())
                )
            );

            const newsItems = responses.flatMap(res => 
                res.data.children.map(post => ({
                    title: post.data.title,
                    url: `https://reddit.com${post.data.permalink}`,
                    source: `t/${post.data.subreddit}`,
                    upvotes: post.data.ups,
                    comments: post.data.num_comments,
                    created: post.data.created_utc * 1000,
                    hot: post.data.ups > 10000
                }))
            );

            renderNews(newsItems.sort((a,b) => b.upvotes - a.upvotes));
        } catch (error) {
            showError('新闻加载失败，请稍后刷新');
        }
    }

    // 渲染新闻卡片
    function renderNews(posts) {
        const container = document.getElementById('newsGrid');
        container.innerHTML = posts.map(post => `
            <a href="${post.url}" target="_blank" class="news-card">
                <div class="news-header">
                    <span class="news-source">${post.source}</span>
                    ${post.hot ? '<span class="hot-tag">TRENDING</span>' : ''}
                </div>
                <h3 class="news-title">${post.title}</h3>
                <div class="news-stats">
                    <span>▲ ${post.upvotes.toLocaleString()}</span>
                    <span>💬 ${post.comments.toLocaleString()}</span>
                    <span>${new Date(post.created).toLocaleDateString()}</span>
                </div>
            </a>
        `).join('');

        // 添加滚动动画
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    entry.target.style.transform = 'translateY(0)';
                    entry.target.style.opacity = 1;
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.news-card').forEach(card => {
            card.style.transform = 'translateY(30px)';
            card.style.opacity = 0;
            card.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
            observer.observe(card);
        });
    }

    // 错误处理
    function showError(message) {
        const container = document.getElementById('newsGrid');
        container.innerHTML = `
            <div class="error-card">
                <div class="error-icon">⚠️</div>
                <p>${message}</p>
                <button onclick="fetchEnhancedNews()" 
                        class="retry-btn">
                    重新加载
                </button>
            </div>
        `;
    }

    // 初始化加载
    fetchEnhancedNews();
    // 每5分钟更新
    setInterval(fetchEnhancedNews, 300000);
</script>
